apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base
- jaeger.yaml  # Jaeger for distributed tracing (dev only)
labels:
- pairs:
    environment: dev
patches:
- path: service-account-patch.yaml
- path: secret-provider-class-patch.yaml
- path: sc-azuredocsdbconnection-secret-patch.yaml
- path: ingress-patch.yaml
  target:
    kind: Ingress
    name: webui-ingress
- path: openai-deployment-patch.yaml
- path: webui-tracing-patch.yaml  # Enable OpenTelemetry tracing

# Image versions for dev environment (updated by CI)
images:
- name: seanmckdemo.azurecr.io/bias-scoring-service
  newTag: main-1bcfcf5
- name: seanmckdemo.azurecr.io/linuxfirst-azuredocs-db-migrations
  newTag: main-1bcfcf5
- name: seanmckdemo.azurecr.io/queue-worker
  newTag: main-1bcfcf5
- name: seanmckdemo.azurecr.io/webui
  newTag: main-1bcfcf5
